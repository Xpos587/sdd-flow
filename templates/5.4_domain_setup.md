# Domain Setup Template

*Domain: {{DOMAIN_NAME}}*
*Generated: {{DATE}}*

---

## Domain Overview

**Domain:** {{DOMAIN_NAME}}
**Description:** {{DOMAIN_DESCRIPTION}}
**Status:** {{PLANNED|ACTIVE|COMPLETED}}

## Domain File Structure

```
docs/domains/{{DOMAIN_NAME}}/
├── components.md          # Component architecture diagrams
├── components.yaml        # Component registry with handlers/DTOs
├── transactions.yaml      # Transaction flows between components
├── context.toml          # Domain isolation configuration
├── implementation_checklist.md  # Implementation tasks
├── bug_list.md           # Bug tracking
└── changes_list.md       # Change tracking
```

---

## Domain Components

### Frontend Components
- **F{{DOMAIN_NUMBER}}.1.ComponentName** - {{COMPONENT_DESCRIPTION}}
- **F{{DOMAIN_NUMBER}}.2.ComponentName** - {{COMPONENT_DESCRIPTION}}

### Backend Components
- **B{{DOMAIN_NUMBER}}.1.ComponentName** - {{COMPONENT_DESCRIPTION}}
- **B{{DOMAIN_NUMBER}}.2.ComponentName** - {{COMPONENT_DESCRIPTION}}

### Shared Components
- **S{{DOMAIN_NUMBER}}.1.ComponentName** - {{COMPONENT_DESCRIPTION}}

---

## Domain Configuration

### Context.toml Generated

```toml
[domain]
name = "{{DOMAIN_NAME}}"

[communication]
allowed_domains = [
  {% for allowed_domain in allowed_domains %}
  "{{allowed_domain}}",
  {% endfor %}
]
```

### Simple Agent Logic

The agent understands domain boundaries from system prompt:

```
Ты работаешь в домене "{{DOMAIN_NAME}}".
Разрешенные папки:
- backend/domains/{{DOMAIN_NAME}}/
- frontend/domains/{{DOMAIN_NAME}}/
- shared/dto/{{DOMAIN_NAME}}/
- docs/domains/{{DOMAIN_NAME}}/

{% for allowed_domain in allowed_domains %}
Можешь читать из домена {{allowed_domain}}:
- docs/domains/{{allowed_domain}}/
- shared/dto/{{allowed_domain}}/
{% endfor %}

Запрещено: cross_domain_imports, direct_db_access, bypass_handler_calls
```

---

## GRAPH_TAG Instructions

### Component Tag Format
```python
#GRAPH_TAG: Component=F{{DOMAIN_NUMBER}}.1.ComponentName
```

### Handler Tag Format
```python
#GRAPH_TAG: Handler=H-F{{DOMAIN_NUMBER}}.1.ComponentName.MethodName
```

### File Naming Convention
- **Frontend:** `F{{DOMAIN_NUMBER}}_{{COMPONENT_NUMBER}}_ComponentName.tsx`
- **Backend:** `B{{DOMAIN_NUMBER}}_{{COMPONENT_NUMBER}}_ComponentName.py`
- **Shared:** `S{{DOMAIN_NUMBER}}_{{COMPONENT_NUMBER}}_ComponentName.ts`

---

## DTO Structure

### 4 DTO Pattern for Each Handler

**Frontend Request DTO (camelCase):**
```typescript
interface {{RequestName}}DTO {
  userName: string;
  accessToken: string;
}
```

**Backend Request DTO (snake_case):**
```python
class {{RequestName}}DTO:
  user_name: str
  access_token: str
```

**Backend Response DTO (snake_case):**
```python
class {{ResponseName}}DTO:
  user_id: int
  session_token: str
```

**Frontend Response DTO (camelCase):**
```typescript
interface {{ResponseName}}DTO {
  userId: number;
  sessionToken: string;
}
```

---

## Domain Validation

### Isolation Check
- [ ] Context.toml properly configured
- [ ] No circular dependencies with other domains
- [ ] Agent prompt contains correct domain rules
- [ ] All domain paths correctly specified

### Component Validation
- [ ] Component reference validation passed
- [ ] GRAPH_TAG IDs follow naming convention
- [ ] Component files properly named

### DTO Validation
- [ ] 4 DTO structure implemented for each handler
- [ ] Naming conventions followed (camelCase vs snake_case)
- [ ] DTO completeness verified in components.yaml

### Cross-Domain Communication
- [ ] Only allowed inter-domain communications exist
- [ ] Proper DTOs defined for cross-domain calls
- [ ] Handlers properly exposed for external access

---

## Domain Relationships

### Communicates With
{% for domain in allowed_domains %}
- **{{domain}}** - {{COMMUNICATION_REASON}}
{% endfor %}

### Depends On
{% for dependency in dependencies %}
- **{{dependency.name}}** - {{dependency.reason}}
{% endfor %}

### Exposes To
{% for consumer in consumers %}
- **{{consumer.name}}** - {{consumer.interface}}
{% endfor %}

---

## Implementation Notes

{{ADDITIONAL_NOTES_AND_REQUIREMENTS}}

---
*Generated for SDD Flow Step 5.4 - Domain Setup*